<!DOCTYPE html >
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>FiyaHollo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="../static/js/kobiri.js" th:src="@{/js/kobiri.js}"></script>
    <link src="../static/css/kobiri.css" th:href="@{/css/kobiri.css}" rel="stylesheet" media="screen"/>

</head>
<body>
<div style="margin-top:85px ">
    <div class="stepwizard col-md-offset-3">
        <div class="stepwizard-row setup-panel">
            <div class="stepwizard-step">
                <a href="#step-1" type="button" class="btn btn-primary btn-circle">1</a>
                <p>Bénéficiaire</p>
            </div>
            <div class="stepwizard-step">
                <a href="#step-2" type="button" class="btn btn-default btn-circle" disabled="disabled">2</a>
                <p>Récapitulatif</p>
            </div>
            <div class="stepwizard-step">
                <a href="#step-3" type="button" class="btn btn-default btn-circle" disabled="disabled">3</a>
                <p>Paiement</p>
            </div>
        </div>
    </div>

    <form name="transfert-client" action="" th:object="${transfert}" method="post">
        <input type="hidden" name="beneficiaire">
        <div class="row setup-content" id="step-1">
            <div class="col-xs-6 col-md-offset-3">
                <div class="col-md-12">
                    <h1>Liste des bénéficiaire</h1>
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th scope="col">Nom et prenom</th>
                                <th scope="col">Numéro de téléphone</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr  th:if="${transfert.client.beneficiaires.empty}">
                                <td colspan="2"> Pas de beneficiaire disponible</td>
                            </tr>
                            <tr th:each="beneficiaire : ${transfert.client.beneficiaires}">

                                <td><span th:text="${beneficiaire.nom  + ' ' + beneficiaire.prenom}"> Nom et prenom </span></td>
                                <td><span th:text="${beneficiaire.telephone}"> numero de telephone </span></td>
                                <td>
                                    <button th:attr="data-id=${beneficiaire.id},
                                                     data-nom=${beneficiaire.nom},
                                                     data-prenom=${beneficiaire.prenom},
                                                     data-telephone=${beneficiaire.telephone}"
                                            class="btn btn-primary nextBtn btn-lg pull-right beneficiaire" type="button" >Choisir</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-md-12">
                    <a class="btn btn-success" href="#" th:href="@{/books/create}"> Ajouter Bénéficiaire </a>
                </div>
            </div>
        </div>
        <div class="row setup-content" id="step-2">
            <div class="col-xs-6 col-md-offset-3">
                <div class="col-md-12">
                    <h3> RÉCAPITULATIF</h3>
                    <table class="table table-striped table-bordered">
                        <tbody>
                            <tr>
                                <td><span id="nom-prenom"> Beneficiaire</span><span id="telephone"> numero de telephone </span></td>
                                <td><span th:text="${transfert.montantEuros * transfert.taux}">0 GNF</span></td>
                            </tr>
                            <tr>
                                <td><span>Frais de transfert </span></td>
                                <td><span>+ 2,50 €</span></td>
                            </tr>
                            <tr><td>Point de retrait</td><td>Mamou Petel 622000000</td></tr>
                        </tbody>
                    </table>
                </div>
                <button class="btn btn-primary backBtn btn-lg pull-left" type="button" >Précédent</button>
                <button class="btn btn-primary nextBtn btn-lg pull-right" type="button" >Suivant</button>
            </div>
        </div>
        <div class="row setup-content" id="step-3">
            <div class="col-xs-6 col-md-offset-3">
                <div class="col-md-12">
                    <h3> Step 3</h3>
                    <button class="btn btn-primary backBtn btn-lg pull-left" type="button" >Précédent</button>
                    <button class="btn btn-success btn-lg pull-right" type="submit">Suivant</button>
                </div>
            </div>
        </div>
    </form>

</div>
</div>
<script>
        $( document ).ready(function () {
            $( ".beneficiaire" ).click(function (e) {
                e.preventDefault();
                var beneficiaire = {
                                    "id":        $('.beneficiaire[data-id]').data('id'),
                                    "nom":       $('.beneficiaire[data-nom]').data('nom'),
                                    "prenom":    $('.beneficiaire[data-prenom]').data('prenom'),
                                    "telephone": $('.beneficiaire[data-id]').data('telephone')
                                    };
                $("input[name=beneficiaire]").val(beneficiaire);
                $("#nom-prenom").html(beneficiaire.nom +" "+ beneficiaire.nom);
                $("#telephone").html(beneficiaire.telephone);
            });
        })
    </script>
</body>
</html>